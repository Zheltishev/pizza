CREATE TABLE pizza (
	pizza_id serial PRIMARY KEY,
    pizza_name varchar(64) NOT NULL,
    pizza_image_name varchar(64) NOT NULL,
    pizza_price numeric CONSTRAINT positive_pizza_price CHECK (pizza_price > 0),
    pizza_ingredients text NOT NULL,
    pizza_size varchar(32) NOT NULL,
    pizza_dough varchar(32) NOT NULL,
    pizza_hot boolean NOT NULL,
    pizza_meat boolean NOT NULL,
    pizza_vegetarian boolean NOT NULL,
    pizza_mix boolean NOT NULL,
    pizza_rating numeric NOT NULL
)

INSERT INTO pizza (pizza_id, pizza_name, pizza_image_name, pizza_price, pizza_ingredients, pizza_size, pizza_dough, pizza_hot, pizza_meat, pizza_vegetarian, pizza_mix, pizza_rating) VALUES 
    (DEFAULT, 'Аляска', 'alaska', 520, 'бекон, колбаски, шампиньоны, лук, маринованные огурчики, моцарелла', 'маленькая средняя большая', 'традиционное тонкое', false, true, false, false, 3.10),
    (DEFAULT, 'Аррива', 'arriva', 490, 'цыпленок, острые колбаски чоризо, сладкий перец, красный лук, томаты, моцарелла, соус ранч, чеснок', 'средняя большая', 'традиционное тонкое', true, true, false, false, 3.52),
    (DEFAULT, 'Баварская', 'bavarian', 560, 'баварские колбаски, бекон, шампиньоны, лук, пепперони, моцарелла, томатный соус', 'маленькая средняя большая', 'традиционное', false, true, false, false, 4.90),
    (DEFAULT, 'Бургер', 'burger', 500, 'ветчина, маринованные огурчики, томаты, соус бургер, моцарелла, чеснок, лук', 'маленькая средняя большая', 'традиционное тонкое', false, true, false, false, 4.62),
    (DEFAULT, 'Карбонара', 'carbonara', 600, 'бекон, чеддер, пармезан, моцарелла, томаты, лук, чеснок, соус альфредо, итальянские травы', 'средняя большая', 'традиционное тонкое', false, true, false, false, 4.12),
    (DEFAULT, 'Цезарь', 'cesar', 570, 'курица, маслины, листья салата, гренки, моцарелла, пармезан, соус цезарь', 'средняя большая', 'традиционное тонкое', false, true, false, false, 4.95),
    (DEFAULT, 'Сырная', 'cheese', 480, 'моцарелла, чеддер, пармезан, соус альфредо', 'маленькая средняя большая', 'традиционное тонкое', false, false, true, false, 4.76),
    (DEFAULT, 'Сыр и грибы', 'cheeseMushrooms', 580, 'шампиньоны, соус рэнч, чеснок, моцарелла, чеддер', 'маленькая средняя', 'традиционное тонкое', false, false, true, false, 3.48),
    (DEFAULT, 'Цыпленок барбекю', 'chickenBarbecue', 650, 'цыпленок, бекон, соус барбекю, лук, моцарелла', 'средняя большая', 'традиционное', false, true, false, false, 4.89),
    (DEFAULT, 'Чоризо', 'chorizo', 630, 'колбаски чоризо, перец, моцарелла, томатный соус', 'маленькая средняя большая', 'традиционное тонкое', true, true, false, false, 4.69),
    (DEFAULT, 'Курица с маринованными огурчиками', 'cucumber', 570, 'куриное филе, маринованные огурчики, моцарелла, соус рэнч', 'маленькая средняя', 'традиционное тонкое', false, true, false, false, 2.74),
    (DEFAULT, 'Диабло', 'diablo', 580, 'острые колбаски чоризо, острый перец халапеньо, соус барбекю, митболы из говядины, перец, лук, моцарелла', 'маленькая средняя большая', 'традиционное тонкое', true, true, false, false, 4.84), 
    (DEFAULT, 'С зеленью', 'dill', 520, 'курица, бекон, томаты, шампиньоны, пармезан, зелень, моцарелла', 'маленькая средняя', 'традиционное тонкое', false, true, false, false, 4.71), 
    (DEFAULT, 'Дон бекон', 'don', 520, 'моцарелла, колбаски охотничьи, бекон, салями, лук, соус гриль', 'средняя большая', 'традиционное', false, true, false, false, 1.55),
    (DEFAULT, 'Двойной цыплёнок', 'doubleChicken', 560, 'цыпленок, моцарелла, соус альфредо', 'средняя большая', 'традиционное тонкое', false, true, false, false, 4.77),
    (DEFAULT, 'Дракон', 'dragon', 610, 'моцарелла, шампиньоны, колбаски пепперони, перец халапеньо, ветчина, острый перец, пармезан', 'средняя большая', 'традиционное', true, true, false, false, 4.65),
    (DEFAULT, 'Фермерская', 'farm', 520, 'моцарелла, ветчина, грибы, бекон, маринованные огурчики, лук', 'маленькая средняя большая', 'традиционное', false, true, false, false, 4.70),
    (DEFAULT, 'Греческая', 'greek', 550, 'томаты, болгарский перец, салат, маслины, сыр фета, моцарелла', 'маленькая средняя большая', 'традиционное тонкое', false, true, false, false, 4.76),
    (DEFAULT, 'Гриль', 'grill', 580, 'соус барбекю, моцарелла, салями, курица, бекон, ветчина, перец сладкий, лук, соус гриль', 'маленькая средняя большая', 'традиционное тонкое', false, true, false, false, 4.82),
    (DEFAULT, 'Ветчина и сыр', 'hamCheese', 490, 'ветчина, моцарелла, соус альфредо', 'маленькая средняя большая', 'традиционное тонкое', false, true, false, false, 3.68),
    (DEFAULT, 'Гавайи', 'hawaii', 560, 'ананас, ветчина, моцарелла, томатный соус', 'маленькая средняя большая', 'традиционное тонкое', false, true, false, false, 4.77),
    (DEFAULT, 'Мясная острая', 'hot', 650, 'сальса, моцарелла, ветчина, салями, бекон, помидоры, лук, халапеньо, укроп', 'средняя большая', 'традиционное', true, true, false, false, 4.91),
    (DEFAULT, 'Иллинойс', 'illinois', 590, 'баварские колбаски, маринованные опята, соус рэнч, шампиньоны, моцарелла, укроп', 'маленькая средняя большая', 'традиционное тонкое', false, true, false, false, 4.70),
    (DEFAULT, 'Жульен', 'julien', 510, 'горчичный соус, моцарелла, чеснок, лук, курица, шампиньоны', 'маленькая средняя большая', 'традиционное', false, true, false, false, 4.15),
    (DEFAULT, 'Мандат', 'mandat', 540, 'томатный соус, моцарелла, ветчина, салями, пепперони, колбаски охотничьи, помидоры, укроп', 'маленькая средняя', 'традиционное тонкое', false, true, false, false, 1.39),
    (DEFAULT, 'Маргарита', 'margarita', 480, 'томаты, томатный соус, моцарелла', 'маленькая средняя большая', 'традиционное тонкое', false, false, true, false, 4.35),
    (DEFAULT, 'Мясная', 'meat', 580, 'ветчина, цыпленок, пепперони, острые колбаски чоризо, моцарелла, томатный соус', 'маленькая средняя большая', 'традиционное тонкое', true, true, false, false, 4.85),
    (DEFAULT, 'Мексиканская', 'mexico', 610, 'ветчина, пепперони, халапеньо, томаты, маринованные огурчики, моцарелла, перец', 'маленькая средняя большая', 'традиционное тонкое', true, true, false, false, 4.87),
    (DEFAULT, 'Микс', 'mix', 650, 'бекон, цыплёнок, ветчина, чеддер, пармезан, соус песто, брынза, томаты, лук, соус альфредо, чеснок', 'средняя большая', 'традиционное тонкое', false, true, false, true, 4.90),
    (DEFAULT, 'Горчичная', 'mustard', 560, 'горчичный соус, моцарелла, томаты, сосиски, бекон, зелень', 'маленькая средняя большая', 'традиционное тонкое', false, true, false, false, 3.72),
    (DEFAULT, 'Пермячка', 'pepper', 520, 'перец, курица, бекон, шампиньоны, моцарелла, ветчина, томаты', 'маленькая средняя большая', 'традиционное тонкое', false, true, false, false, 3.65),
    (DEFAULT, 'Пепперони', 'pepper', 490, 'пепперони, моцарелла, томаты, томатный соус', 'маленькая средняя большая', 'традиционное тонкое', false, true, false, false, 4.76),
    (DEFAULT, 'Песто', 'pesto', 570, 'цыпленок, соус песто, брынза, томаты, моцарелла, соус альфредо', 'маленькая средняя большая', 'традиционное тонкое', false, true, false, false, 2.66),
    (DEFAULT, '4 сезона', 'seasons', 640, 'моцарелла, ветчина, пепперони, брынза, томаты, шампиньоны, итальянские травы', 'маленькая средняя большая', 'традиционное тонкое', false, true, false, true, 4.89),
    (DEFAULT, 'Тропикана', 'tropikana', 590, 'моцарелла, курица, ананас, халапеньо, соус барбекю', 'маленькая средняя большая', 'традиционное тонкое', true, true, false, false, 2.82),
    (DEFAULT, 'Вегатарианская', 'vegan', 530, 'моцарелла, сладкий перец, маслины, красный лук', 'маленькая средняя', 'тонкое', false, false, true, false, 3.90),
    (DEFAULT, 'Вегатарианская с грибами', 'vegetableMushroom', 530, 'моцарелла, сладкий перец, маслины, красный лук, шампиньоны, зелень', 'маленькая средняя', 'тонкое', false, false, true, false, 4.93)

CREATE TABLE users (
    user_id serial PRIMARY KEY,
    user_name varchar(32) NOT NULL,
    user_password varchar(32) NOT NULL,
    user_email text NOT NULL UNIQUE,
    user_created date NOT NULL
)

CREATE TABLE tokens (
    token_id serial PRIMARY KEY,
    token_owner INTEGER REFERENCES users (user_id),
    token_access text NOT NULL,
    token_refresh text NOT NULL
)

CREATE TABLE orders (
    order_id serial PRIMARY KEY,
    order_phone text NOT NULL,
    order_address text NOT NULL,
    order_user_id serial NOT NULL,
    order_price numeric CONSTRAINT positive_order_price CHECK (order_price > 0),
    order_date bigint NOT NULL
)

CREATE TABLE composition (
    composition_id serial PRIMARY KEY,
    composition_order INTEGER REFERENCES orders (order_id),
    composition_pizza_name varchar(64) NOT NULL,
    composition_pizza_count smallint NOT NULL,
    composition_pizza_price numeric CONSTRAINT positive_composition_pizza_price CHECK (composition_pizza_price > 0),
    composition_pizza_dough varchar(32) NOT NULL,
    composition_pizza_size varchar(32) NOT NULL
)